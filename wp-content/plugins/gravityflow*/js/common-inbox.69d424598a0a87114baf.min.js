"use strict";(self.webpackChunkgravityflow=self.webpackChunkgravityflow||[]).push([[715],{5165:function(t,n,e){e.r(n),e.d(n,{default:function(){return Tn}});var o=e(7927);var i=e(4850),a={},c={activeGrid:"",actionData:[],actionMenuOpen:!1,activeAction:null,activeActionNote:"",activeActionSubmitType:"",cleanDocTitle:document.title||"",dragging:!1,latestUpdateData:{},newRowsOnUpdate:0,notificationShown:!1,openInNewTab:!1,previousRowCount:0,pushEnabled:!1},r=function(){a.containers.forEach((function(t){!function(t){var n={isDown:!1,moveEventTriggered:!1,startX:0,scrollLeft:0};t.addEventListener("mousedown",(function(e){n.isDown=!0,t.classList.add("drag-horizontal--active"),n.startX=e.pageX-t.offsetLeft,n.scrollLeft=t.scrollLeft})),t.addEventListener("mouseleave",(function(){n.isDown=!1,t.classList.remove("drag-horizontal--active")})),t.addEventListener("mouseup",(function(){n.isDown=!1,t.classList.remove("drag-horizontal--active"),(0,o.X)({event:"gform-utils/horizontal-drag-ended",native:!1}),n.moveEventTriggered=!1})),t.addEventListener("mousemove",(function(e){if(n.isDown){e.preventDefault();var i=3*(e.pageX-t.offsetLeft-n.startX);t.scrollLeft=n.scrollLeft-i,n.moveEventTriggered||((0,o.X)({event:"gform-utils/horizontal-drag-started",native:!1}),n.moveEventTriggered=!0)}}))}(i.v$(".ag-center-cols-viewport",!1,t,!0)[0])}))},s=function(){r(),document.addEventListener("gform-utils/horizontal-drag-started",(function(){c.dragging=!0})),document.addEventListener("gform-utils/horizontal-drag-ended",(function(){setTimeout((function(){c.dragging=!1}),200)}))},l=e(9438),d=e.n(l),u={refreshTimers:{},grids:{},gridOptions:{},flyouts:{},notifications:{}},g=function(t){var n=t.delegateTarget.parentNode.dataset.gridId;u.gridOptions[n].api.setFilterModel(null)},f=function(){d()(document.body,'[data-js="inbox-clear-filters"]',"click",g)},v=/(android)/i.test(window.navigator.userAgent),p=!!window.chrome,h="undefined"!=typeof InstallTrigger,m=document.documentMode||!1,w=!m&&!!window.StyleMedia,y=!!window.navigator.userAgent.match(/(iPod|iPhone|iPad)/i),b=!!window.navigator.userAgent.match(/(iPod|iPhone)/i),_=!!window.opera||window.navigator.userAgent.indexOf(" OPR/")>=0,k=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!p&&!_&&"undefined"!==window.webkitAudioContext,x=window.navigator.platform;var E={android:v,chrome:p,edge:w,firefox:h,ie:m,ios:y,iosMobile:b,opera:_,safari:k,os:x},O=0,A=E.ie||E.firefox||E.chrome&&!E.edge?document.documentElement:document.body,L=function(t){var n,e=t.delegateTarget.parentNode.parentNode;if(e.classList.contains("gflow-grid--fullscreen"))document.body.classList.remove("gflow-grid--fullscreen-active"),(n=document.body.style).overflowY="",n.position="static",n.marginTop="0px",n.width="",A.scrollTop=O,e.style.left="".concat(e.dataset.left,"px"),e.style.top="".concat(e.dataset.top,"px"),e.style.width="".concat(e.dataset.width,"px"),e.style.height="".concat(e.dataset.height,"px"),setTimeout((function(){var t=i.v$("gflow-grid-placeholder")[0];t.parentNode.removeChild(t),e.classList.remove("gflow-grid--animate"),e.classList.remove("gflow-grid--fullscreen"),e.style.left="",e.style.top="",e.style.width="",e.style.height=""}),400);else{var o=e.getBoundingClientRect();e.insertAdjacentHTML("beforebegin",'<div data-js="gflow-grid-placeholder" style="height: '.concat(o.height,'px"></div>')),e.setAttribute("data-top",o.top),e.setAttribute("data-left",o.left),e.setAttribute("data-height",o.height),e.setAttribute("data-width",o.width),e.style.left="".concat(o.left,"px"),e.style.top="".concat(o.top,"px"),e.style.width="".concat(o.width,"px"),e.style.height="".concat(o.height,"px"),e.classList.add("gflow-grid--fullscreen"),setTimeout((function(){var t=document.body.classList.contains("admin-bar")?32:0;e.classList.add("gflow-grid--animate"),e.style.left="0",e.style.top="".concat(t,"px"),e.style.width="100%",e.style.height="calc(100% - ".concat(t,"px)")}),25),setTimeout((function(){document.body.classList.add("gflow-grid--fullscreen-active"),function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=document.body.style;O=A.scrollTop,n.overflowY="scroll",n.position="fixed",n.width="100%",t&&(n.marginTop="-".concat(O,"px"))}(!1)}),400)}},T=function(){d()(document.body,'[data-js="inbox-fullscreeen"]',"click",L)},j=e(7462),M=e(3345),I=e.n(M),C={animateRows:!1},D=(null===I()||void 0===I()?void 0:I().grids)||{},N=function(t){var n=[];return u.gridOptions[t].api.forEachNode((function(t){return n.push(t.data.id)})),n},S=function(t){var n=t.delegateTarget,e=i.oq(n,'[data-js="gflow-inbox"]');return P(e)},P=function(t){return t.dataset.gridId||"inbox_default"},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.api.forEachNode((function(e){Number(e.data.id)===Number(n)&&(t.rowData.splice(e.rowIndex,1),t.api.setRowData(t.rowData))}))},F=function(t){var n=t.delegateTarget,e=S(t);u.gridOptions[e].api.setQuickFilter(n.value)},H=function(t){var n=S(t);u.gridOptions[n].api.setQuickFilter(null)},R=function(){d()(document.body,'[data-js="gflow-inbox-search"]',"keyup",F),d()(document.body,'[data-js="gflow-inbox-search"]',"search",H)},G=e(853),Z=e(5671),U=e(3144),z=e(8527),X=function(){function t(){(0,Z.Z)(this,t)}return(0,U.Z)(t,[{key:"init",value:function(t){this.params=t,this.eGui=document.createElement("div"),this.eGui.setAttribute("role","presentation"),this.eGui.classList.add("ag-input-wrapper"),this.eGui.classList.add("custom-date-filter"),this.eGui.innerHTML='\n\t\t\t<input type="text" data-input style="width: 100%;" />\n\t\t\t<a class="ag-grid__date-toggle" title="toggle" data-toggle>\n\t\t        <i class="gflow-icon gflow-icon--date"></i>\n\t\t    </a>\n\t\t\n\t\t    <a class="ag-grid__date-clear-toggle" title="clear" data-clear>\n\t\t        <i class="gflow-icon gflow-icon--delete"></i>\n\t\t    </a>\n\t\t',this.eInput=this.eGui.querySelector("input"),this.picker=(0,z.Z)(this.eGui,{onChange:this.onDateChanged.bind(this),dateFormat:"d/m/Y",wrap:!0}),this.picker.calendarContainer.classList.add("ag-custom-component-popup"),this.date=null}},{key:"getGui",value:function(){return this.eGui}},{key:"onDateChanged",value:function(t){this.date=t[0]||null,this.params.onDateChanged()}},{key:"getDate",value:function(){return this.date}},{key:"setDate",value:function(t){this.picker.setDate(t),this.date=t}},{key:"setInputPlaceholder",value:function(t){this.eInput.setAttribute("placeholder",t)}}]),t}(),$=e(3279),B=e.n($);var J={gridMutationEvents:["onModelUpdated","onColumnResized","onColumnVisible","onDragStopped"],openNewTabKeycodes:[16,17,91,93]},K=function(t){var n,e=(n=t,window.window.localStorage.getItem(n));if(e){var o,i,a=JSON.parse(e).map((function(t){return t.colId})).sort(),c=u.gridOptions[t].columnDefs.map((function(t){return t.field})).sort();if(o=a,i=c,Array.isArray(o)&&Array.isArray(i)&&o.length===i.length&&o.every((function(t,n){return t===i[n]})))e=JSON.parse(e).sort((function(t){return"id"===t.colId?-1:0})),u.gridOptions[t].columnApi.applyColumnState({state:e,applyOrder:!0});else u.gridOptions[t].api.sizeColumnsToFit()}else u.gridOptions[t].api.sizeColumnsToFit()},Y=function(t,n){var e,o,a=u.gridOptions[n].api.getFilterModel(),c=i.v$('[data-js="gflow-inbox"][data-grid-id="'.concat(n,'"]'),!1,document,!0)[0];0===Object.keys(a).length?c.classList.remove("gflow-inbox--filters-active"):c.classList.add("gflow-inbox--filters-active"),e=n,o=JSON.stringify(u.gridOptions[n].columnApi.getColumnState()),window.window.localStorage.setItem(e,o)},W=function(t){-1!==J.openNewTabKeycodes.indexOf(t.which)&&("keydown"===t.type?c.openInNewTab=!0:c.openInNewTab=!1)},V=function(){document.addEventListener("keydown",W),document.addEventListener("keyup",W)};var Q=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.href,o="?",i=e.split("#"),a=i[1]?"#".concat(i[1]):"",c=i[0].split("?"),r=c[0],s=c[1],l=void 0!==s?s.split("&"):[],d=!1;return l.forEach((function(e,o){e.startsWith("".concat(t,"="))&&(d=!0,l[o]="".concat(t,"=").concat(n))})),d||(l[l.length]="".concat(t,"=").concat(n)),"".concat(r).concat(o).concat(l.join("&")).concat(a)};function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=document.createElement("a");n.href=t,n.target="_blank",document.body.appendChild(n),n.click(),n.remove()}var nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Q("page","gravityflow-inbox");if(o=Q("view","entry",o),o=Q("lid",t,o),o=Q("id",n,o),e)return o;c.openInNewTab?tt(o):window.location.href=o},et=function(t){u.gridOptions[t].onGridReady=function(n){return function(t,n){K(n)}(0,t)},u.gridOptions[t].onCellClicked=function(t){return function(t){c.dragging||"actions"===t.column.colId||nt(t.data.id,t.data.fid)}(t)},J.gridMutationEvents.forEach((function(n){u.gridOptions[t][n]=B()((function(n){return Y(0,t)}),200,!1)}))},ot=function(){var t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2];return Math.sign(parseInt(t)-parseInt(n))},it=function(){var t="object"==typeof(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new Date(1e3*(arguments.length<=1?void 0:arguments[1])),n=new Date(1e3*(arguments.length<=2?void 0:arguments[2])),e=0;return n.setDate(n.getUTCDate()),n.setMonth(n.getUTCMonth()),t.setHours(0,0,0,0),n.setHours(0,0,0,0),n<t?e=-1:n>t&&(e=1),void 0===(arguments.length<=5?void 0:arguments[5])?e:-1*e},at=function(t){var n=t.colDef.displayKey;return t.data[n]},ct=function(t){return t.valueFormatter=at,"string"===t.compareType?t:"date"===t.compareType?(t.comparator=it.bind(null,t),t.filterParams={comparator:it.bind(null,t),inRangeInclusive:!0},t.filter="agDateColumnFilter",t):(t.comparator=ot.bind(null,t),t)},rt=e(5311),st=e.n(rt);function lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return"".concat(t,"-").concat(Math.random().toString(36).substr(2,9))}function dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"gform-input",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"gform-input",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";return'\n\t<input \n\t\tclass="'.concat(i,'" \n\t\tvalue="').concat(o,'" \n\t\ttype="').concat(t,'" \n\t\tdata-js="').concat(a,'"\n\t\t').concat(c?'placeholder="'.concat(c,'"'):"","\n\t\t").concat(n?'id="'.concat(n,'"'):"","\n\t\t").concat(e?'name="'.concat(e,'"'):"","\n\t/>\n\t")}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"gform-field__toggle",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"gform-toggle";return'\n\t<div class="'.concat(a,'">\n\t\t<span class="gform-settings-input__container">\n\t\t\t<input \n\t\t\t\ttype="checkbox" \n\t\t\t\tclass="gform-field__toggle-input" \n\t\t\t\tdata-js="').concat(c,'" \n\t\t\t\t').concat(t?"id=".concat(t):"","\n\t\t\t\t").concat(n?"name=".concat(n):"","\n\t\t\t\t").concat(e?"checked":"",'\n\t\t\t>\n\t\t\t<label class="gform-field__toggle-container" ').concat(t?"for=".concat(t):"",'>\n\t\t\t\t<span \n\t\t\t\t\tclass="gform-field__toggle-switch-text screen-reader-text"\n\t\t\t\t\tdata-disabled-text="').concat(o,'"\n\t\t\t\t\tdata-enabled-text="').concat(i,'"\n\t\t\t\t>').concat(e?i:o,'</span>\n\t\t\t\t<span class="gform-field__toggle-switch"></span>\n\t\t\t</label>\n\t\t</span>\n\t</div>\n\t')}var gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return'\n\t<span class="gform-flyout__setting-label">\n\t\tEnable Push Notifications\n\t</span>\n\t<span class="gform-flyout__setting-desc">\n\t\tYou will have to allow push notifications for this domain and browser to enable this feature. If you haven\'t already,\n\t\tyour browser will ask you to enable them one time.\n\t</span>\n\t'.concat(ut("inbox-setting--push-enabled","inbox-setting--push-enabled",t.push_enabled,"disabled","enabled","gform-field__toggle gform-flyout__setting","inbox-setting"),"\n\t")},ft=window.gravityflow_inbox_strings||{},vt=function(){function t(){(0,Z.Z)(this,t)}return(0,U.Z)(t,[{key:"init",value:function(t){var n=t.value;n&&n.actions.length&&(c.actionData.push({entryId:n.entryId,actions:n.actions}),this.eGui=document.createElement("div"),this.eGui.classList.add("gflow-grid__actions-container"),this.eGui.innerHTML=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return'<button \n\t\tclass="gflow-grid__actions-trigger gflow-icon gflow-icon--ellipsis" \n\t\taria-label="View quick actions"\n\t\tdata-js="gflow-quick-actions-trigger"\n\t\tdata-id="'.concat(t,'"\n\t></button>')}(n.entryId))}},{key:"getGui",value:function(){return this.eGui}}]),t}(),pt=function(t){t.parentNode.removeChild(t),a.activeActionMenu&&(a.activeActionMenu.classList.remove("gflow-grid__actions-menu--ajax-running"),a.activeActionMenu.classList.remove("gflow-grid__actions-menu--ajax-action-".concat(c.activeActionSubmitType)))},ht=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=i.v$("gform-loading-mask")[0];t?(a.activeActionMenu.classList.add("gflow-grid__actions-menu--ajax-success"),setTimeout((function(){a.activeActionMenu.classList.add("gflow-grid__actions-menu--fade-out"),setTimeout((function(){q(u.gridOptions[c.activeGrid],c.activeActionMenuEntryId),pt(n),kt()}),400)}),600)):pt(n)},mt=function(){st().ajax({method:"POST",url:"".concat(null==ft?void 0:ft.restUrl,"gf/v2/entries/").concat(c.activeActionMenuEntryId,"/workflow/approvals"),data:{action:c.activeActionSubmitType,gravityflow_note:a.activeActionMenuNote.value},beforeSend(t){t.setRequestHeader("X-WP-Nonce",null==ft?void 0:ft.nonce),a.activeActionMenu.classList.add("gflow-grid__actions-menu--ajax-running"),a.activeActionMenu.classList.add("gflow-grid__actions-menu--ajax-action-".concat(c.activeActionSubmitType)),document.body.insertAdjacentHTML("beforeend",'\n\t<div class="gflow-inbox__loading-mask" data-js="gform-loading-mask"></div>\n')},success(t){"success"===t.status?ht():(ht(!1),alert(t.feedback))},fail(t){ht(!1),alert(t)}})},wt=function(t){var n=t.delegateTarget,e=n.dataset.action,o=n.dataset.id,i=n.dataset.requiresNote;"edit"===e?nt(Number(o)):"approve"!==e&&"reject"!==e||(c.activeActionSubmitType=e,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"true"===t?(a.activeActionMenuNote.focus(),a.activeActionMenu.classList.add("gflow-grid__actions-menu--note-active")):mt()}(i,n))},yt=function(){a.activeActionMenuSubmit.disabled=a.activeActionMenuNote.value.trim().length<=0},bt=function(t){if("cancel"===t.delegateTarget.dataset.action)return a.activeActionMenuNote.value="",a.activeActionMenuSubmit.disabled=!0,void a.activeActionMenu.classList.remove("gflow-grid__actions-menu--note-active");mt()},_t=function(){var t,n,e,o,i,r,s,l,d,u,g=document.getElementById("wpadminbar"),f=g?g.offsetHeight:0,v=(t=c.activeAction,n=t.getBoundingClientRect(),e=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||e.scrollTop,r=window.pageXOffset||o.scrollLeft||e.scrollLeft,s=o.clientTop||e.clientTop||0,l=o.clientLeft||e.clientLeft||0,d=n.top+i-s,u=n.left+r-l,{top:Math.round(d),left:Math.round(u),bottom:Math.round(n.bottom)});if(window.innerHeight-v.bottom-a.activeActionMenu.offsetHeight<20){var p=document.body.classList.contains("gflow-grid--fullscreen-active")?c.activeAction.offsetHeight:0;a.activeActionMenu.style.marginTop="-".concat(p+a.activeActionMenu.offsetHeight,"px"),a.activeActionMenu.style.top="".concat(v.top+c.activeAction.offsetHeight-f,"px")}else{var h=document.body.classList.contains("gflow-grid--fullscreen-active")?c.activeAction.offsetHeight:2*c.activeAction.offsetHeight;a.activeActionMenu.style.top="".concat(v.top+h-f,"px")}a.activeActionMenu.style.left="".concat(v.left,"px")},kt=function(){a.activeActionMenu.parentNode.removeChild(a.activeActionMenu),c.activeAction=null,a.activeActionMenu=null,c.actionMenuOpen=!1},xt=function(t){var n=t.delegateTarget,e=Number(n.dataset.id),o=c.actionData.filter((function(t){return Number(t.entryId)===e}))[0];c.activeGrid=i.oq(n,'[data-js="gflow-inbox"]').dataset.gridId,c.actionMenuOpen&&c.activeAction!==n&&kt(),c.actionMenuOpen?kt():(c.activeAction=n,function(t,n){c.actionMenuOpen=!0,c.activeActionMenuEntryId=t;var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return'<article class="gform-admin gflow-grid__actions-menu" data-js="gflow-quick-actions-menu">\n\t\t<div class="gflow-grid__actions-menu-row">\n\t\t\t<button \n\t\t\t\tclass="gflow-grid__actions-menu-trigger" \n\t\t\t\tdata-js="gflow-quick-actions-menu-trigger" \n\t\t\t\tdata-action="edit"\n\t\t\t\tdata-id="'.concat(t,'"\n\t\t\t>\n\t\t\t\tView\n\t\t\t</button>\n\t\t</div>\n\t\t').concat(n.map((function(t){return'\n\t\t\t\t\t<div class="gflow-grid__actions-menu-row">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass="gflow-grid__actions-menu-trigger gflow-grid__actions-menu-trigger--'.concat(t.key,'"\n\t\t\t\t\t\t\tdata-js="gflow-quick-actions-menu-trigger" \n\t\t\t\t\t\t\tdata-action="').concat(t.key,'"\n\t\t\t\t\t\t\tdata-requires-note="').concat(t.show_note_field,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t').concat(t.label,'\n\t\t\t\t\t\t\t<span class="gform-loader--spin">Loading...</span>\n\t\t\t\t\t\t\t<i class="gflow_grid__actions-icon-success gflow-icon gflow-icon--check"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>')})).join(""),'\n\t\t<div class="gflow-grid__actions-menu-note">\n\t\t\t<span class="gflow-grid__actions-menu-heading">Note:</span>\n\t\t\t<textarea class="gflow-grid__actions-menu-textarea" data-js="gflow-quick-actions-menu-note"></textarea>\n\t\t\t<div class="gflow-grid__actions-menu-footer">\n\t\t\t\t<button \n\t\t\t\t\tclass="gform-button gform-button--white gform-button--size-sm gflow_grid__actions-menu-submit" \n\t\t\t\t\tdata-js="gflow-quick-actions-menu-note-action" \n\t\t\t\t\tdata-action="submit"\n\t\t\t\t\tdisabled="disabled"\n\t\t\t\t>\n\t\t\t\t\tSubmit\n\t\t\t\t\t<span class="gform-loader--spin">Loading...</span>\n\t\t\t\t\t<i class="gflow_grid__actions-icon-success gflow-icon gflow-icon--check"></i>\n\t\t\t\t</button>\n\t\t\t\t<button \n\t\t\t\t\tclass="gform-button gform-button--white gform-button--size-sm gform-button--no-border" \n\t\t\t\t\tdata-js="gflow-quick-actions-menu-note-action"\n\t\t\t\t\tdata-action="cancel"\n\t\t\t\t>Cancel</button>\n\t\t\t</div>\n\t\t</div>\n\t</article>')}(t,n.actions);document.body.insertAdjacentHTML("beforeend",e),a.activeActionMenu=i.v$("gflow-quick-actions-menu")[0],a.activeActionMenuNote=i.v$("gflow-quick-actions-menu-note",!1,a.activeActionMenu)[0],a.activeActionMenuSubmit=i.v$('[data-js="gflow-quick-actions-menu-note-action"][data-action="submit"]',!1,a.activeActionMenu,!0)[0],_t()}(e,o))},Et=function(t){c.actionMenuOpen&&(t.target===i.v$("gform-loading-mask")[0]||t.target===c.activeAction||a.activeActionMenu.contains(t.target)||kt())},Ot=function(){c.actionMenuOpen&&_t()},At=function(){d()(document.body,'[data-js="gflow-quick-actions-trigger"]',"click",xt),d()(document.body,'[data-js="gflow-quick-actions-menu-trigger"]',"click",wt),d()(document.body,'[data-js="gflow-quick-actions-menu-note"]',"keyup",yt),d()(document.body,'[data-js="gflow-quick-actions-menu-note-action"]',"click",bt),document.addEventListener("click",Et),window.addEventListener("resize",Ot)},Lt=e(5281),Tt=e.n(Lt),jt=e(5861),Mt=e(7757),It=e.n(Mt),Ct=e(4942),Dt=e(6557),Nt=e.n(Dt),St=e(5937),Pt=e.n(St),qt=e(1106),Ft=e.n(qt),Ht=null===I()||void 0===I()?void 0:I().endpoints,Rt=function(){var t={};for(var n in Ht){var e=Ht[n];t[n]={endpoint:Ft()("".concat(e.path).concat(e.rest_params)),nonce:e.nonce}}return t}(),Gt=e(7584),Zt=e(180),Ut=e(4457),zt=e(115),Xt=function(t,n,e){var o=new window.FormData;return function t(n,i){if(!function(t){return Array.isArray(e)&&e.some((function(n){return n===t}))}(i))if(i=i||"",n instanceof window.File)o.append(i,n);else if(Array.isArray(n))for(var a=0;a<n.length;a++)t(n[a],i+"["+a+"]");else if("object"==typeof n&&n)for(var c in n)n.hasOwnProperty(c)&&t(n[c],""===i?c:i+"["+c+"]");else null!=n&&o.append(i,n)}(t,n),o},$t=e(7563),Bt=e(4495),Jt=e.n(Bt),Kt=e(2893),Yt=e.n(Kt),Wt=e(3623),Vt=e.n(Wt);function Qt(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function tn(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?Qt(Object(e),!0).forEach((function(n){(0,Ct.Z)(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Qt(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function nn(t){return en.apply(this,arguments)}function en(){return(en=(0,jt.Z)(It().mark((function t(n){var e,o,i,a,c,r,s,l,d,u,g,f,v=arguments;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=v.length>1&&void 0!==v[1]?v[1]:{},o=tn({method:"GET"},e),i=(0,Gt.Z)(["body"],o),n&&Rt[n]){t.next=5;break}throw new Error("Unknown pathKey: ".concat(n));case 5:return a=i.baseUrl||I().site_url,c=Rt[n].endpoint,(0,Zt.Z)(Function,c)&&(c=Rt[n].endpoint(tn(tn({},e.body),i.restParams))),r="".concat(a).concat(c),"GET"!==i.method&&"HEAD"!==i.method&&(s=e.body?e.body:{},i.body=Xt(s)),i.json&&(i.body=JSON.stringify(i.json)),(l=i.params||{})&&!(0,Ut.Z)(l)&&(d=Pt()(l,Nt()),u=(0,$t.stringify)(d,{arrayFormat:"bracket"}),r="".concat(r,"?").concat(u)),g=Rt[n].nonce?{"X-WP-Nonce":Rt[n].nonce,"Content-Type":"application/json"}:{},f=i.headers?tn(tn({},g),i.headers):g,Date.now(),t.abrupt("return",window.fetch(r,tn(tn({},i),{},{headers:f})).then((function(t){return t.ok?t.text().then((function(n){try{var e=JSON.parse(n);Date.now();return{data:e,status:t.status,totalPages:t.headers.get("x-wp-totalpages"),totalPosts:t.headers.get("x-wp-total")}}catch(e){var o=Yt()(Jt()(Vt()(n))),i=new Error("Invalid server response. ".concat(o));throw i.detail={url:r,data:o,status:t.status,error:e},i}})):(0,zt.Z)(t.headers.get("Content-Type"),"application/json")?t.text().then((function(n){try{return{data:JSON.parse(n),status:t.status}}catch(i){var e=Yt()(Jt()(Vt()(n))),o=new Error("Invalid server response. ".concat(e));throw o.detail={url:r,data:e,status:t.status,error:i},o}})):t.text().then((function(n){var e=Yt()(Jt()(Vt()(n))),o=new Error("Unknown server response. ".concat(e));throw o.detail={url:r,data:e,status:t.status},o}))})).catch((function(t){return{error:t}})));case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var on=window.gravityflow_inbox_strings||{},an=function(){var t=(0,jt.Z)(It().mark((function t(n,e,o,i){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn("inbox/preferences",{method:"PUT",headers:{"X-WP-Nonce":null==on?void 0:on.nonce,"Content-type":"application/json; charset=UTF-8"},json:{key:n,value:e,type:o,user_id:I().user_id,view:i}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(n,e,o,i){return t.apply(this,arguments)}}(),cn=(null===I()||void 0===I()?void 0:I().grids)||{},rn=(null===I()||void 0===I()?void 0:I().i18n)||{},sn=function(t,n){var e=u.gridOptions[t].api,o=0;e.forEachNode((function(){o++}));var i=n.add.length-n.remove.length+n.update.length;c.newRowsOnUpdate=c.newRowsOnUpdate+(i-o)},ln=function(t){if(t&&cn[t].push_enabled){var n=u.gridOptions[t].api.getDisplayedRowCount();if(n!==c.previousRowCount){var e=c.latestUpdateData.add[0],o="noti-".concat(e.id);u.notifications[o]=new window.Notification(rn.inbox_notification_title,{body:rn.new_inbox_items}),c.previousRowCount=n,u.notifications[o].addEventListener("click",(function(t){if(c.latestUpdateData.add.length>1)window.parent.focus(),window.focus(),t.target.close();else{var n=nt(e.id,e.fid,!0);window.open(n,o).focus()}}),!1)}}},dn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Tt().now())return c.newRowsOnUpdate=0,void(document.title=c.cleanDocTitle);c.newRowsOnUpdate>0?(document.title="(".concat(c.newRowsOnUpdate,") ").concat(c.cleanDocTitle),ln(t)):document.title=c.cleanDocTitle},un=function(t,n){"granted"===t?(an("push_enabled",!0,"view",n),cn[n].push_enabled=!0):(an("push_enabled",!1,"view",n),cn[n].push_enabled=!1)},gn=function(t){if("Notification"in window){var n=i.oq(t,".gform-flyout").previousElementSibling;t.checked?!function(){try{window.Notification.requestPermission().then()}catch(t){return!1}return!0}()?window.Notification.requestPermission((function(t){un(t,n.dataset.gridId)})):window.Notification.requestPermission().then((function(t){un(t,n.dataset.gridId)})):(an("push_enabled",!1,"",n.dataset.gridId),cn[n.dataset.gridId].push_enabled=!1)}else alert(rn.browser_notifications_error)},fn=function(){Tt().on("focus",(function(){c.notificationShown=!1,dn()})),Tt().on("blur",(function(){c.openInNewTab=!1}))};function vn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(e&&n){if(27===t.keyCode)return n.focus(),void o();if(9===t.keyCode){var a=i.F9(e),c=a[0],r=a[a.length-1];t.shiftKey?document.activeElement===c&&(r.focus(),t.preventDefault()):document.activeElement===r&&(c.focus(),t.preventDefault())}}}var pn=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Z.Z)(this,t),(0,Ct.Z)(this,"closeFlyout",(function(){n.flyoutElement.classList.contains("anim-in-active")&&(n.flyoutElement.classList.remove("anim-in-ready"),n.flyoutElement.classList.remove("anim-in-active"),n.flyoutElement.classList.add("anim-out-ready"),window.setTimeout((function(){n.flyoutElement.classList.add("anim-out-active")}),25),window.setTimeout((function(){n.flyoutElement.classList.remove("anim-out-ready"),n.flyoutElement.classList.remove("anim-out-active")}),n.animationDelay),n.state.open=!1,n.onClose())})),(0,Ct.Z)(this,"maybeCloseFlyout",(function(t){var e;(null===(e=t.detail)||void 0===e?void 0:e.activeId)!==n.id&&(n.flyoutElement.classList.remove("anim-in-ready"),n.flyoutElement.classList.remove("anim-in-active"),n.flyoutElement.classList.remove("anim-out-ready"),n.flyoutElement.classList.remove("anim-out-active"),n.state.open=!1)})),(0,Ct.Z)(this,"handleKeyEvents",(function(t){return vn(t,n.triggerElement,n.flyoutElement,n.closeFlyout)})),(0,Ct.Z)(this,"handleTriggerClick",(function(t){n.triggerElement=t.target,n.state.open?(n.closeFlyout(),n.triggerElement.focus(),n.state.open=!1):(n.showFlyout(),n.closeElement.focus(),n.state.open=!0)})),(0,j.Z)(this,{animationDelay:215,closeButtonClasses:"gform-flyout__close",closeOnOutsideClick:!0,content:"",description:"",direction:"right",id:lt("flyout"),insertPosition:"beforeend",lockBody:!1,onClose:function(){},onOpen:function(){},position:"fixed",renderOnInit:!0,target:"body",title:"",triggers:'[data-js="gform-trigger-flyout"]',wrapperClasses:"gform-flyout"},e),this.state={open:!1},this.flyoutElement=null,this.triggerElement=null,this.closeElement=null,this.renderOnInit&&this.init()}return(0,U.Z)(t,[{key:"showFlyout",value:function(){var t=this;this.onOpen(),this.flyoutElement.classList.add("anim-in-ready"),window.setTimeout((function(){t.flyoutElement.classList.add("anim-in-active")}),25)}},{key:"render",value:function(){var t=document.querySelectorAll(this.target)[0];t&&(t.insertAdjacentHTML(this.insertPosition,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";return'\n\t<article id="'.concat(t,'" class="').concat(r," gform-flyout--").concat(i," gform-flyout--").concat(a,'">\n\t\t<button \n\t\t\tclass="').concat(n,' gform-button gform-button--secondary gform-button--circular gform-button--size-xs"\n\t\t\tdata-js="gform-flyout-close" \n\t\t\ttitle="Close this flyout"\n\t\t>\n\t\t\t<i class="gform-button__icon gflow-icon gflow-icon--delete"></i>\n\t\t</button>\n\t\t').concat(c||o?'<header class="gform-flyout__head">':"","\n\t\t").concat(c?'<div class="gform-flyout__title">'.concat(c,"</div>"):"","\n\t\t").concat(o?'<div class="gform-flyout__desc">'.concat(o,"</div>"):"","\n\t\t").concat(c||o?"</header>":"",'\n\t\t<div class="gform-flyout__body">').concat(e,"</div>\n\t</article>\n\t")}(this.id,this.closeButtonClasses,this.content,this.description,this.direction,this.position,this.title,this.wrapperClasses)),this.flyoutElement=document.getElementById(this.id),this.closeElement=i.v$("gform-flyout-close",!1,this.flyoutElement)[0])}},{key:"bindEvents",value:function(){var t=this;this.flyoutElement.addEventListener("keydown",this.handleKeyEvents),this.closeElement.addEventListener("click",this.closeFlyout),i.v$(this.triggers,!0,document,!0).forEach((function(n){return n.addEventListener("click",t.handleTriggerClick)})),document.addEventListener("gform/close-flyouts",this.maybeCloseFlyout),this.closeOnOutsideClick&&document.addEventListener("click",function(t){!this.flyoutElement.contains(t.target)&&this.state.open&&this.closeFlyout()}.bind(this))}},{key:"init",value:function(){this.render(),this.bindEvents()}}]),t}(),hn=(null===I()||void 0===I()?void 0:I().grids)||{},mn=(null===I()||void 0===I()?void 0:I().i18n)||{},wn=function(t){"inbox-setting--push-enabled"===t.delegateTarget.name&&gn(t.delegateTarget)},yn=function(){d()(document.body,'[data-js="inbox-setting"]',"click",wn)},bn=(null===I()||void 0===I()?void 0:I().grids)||{},_n=(null===I()||void 0===I()?void 0:I().i18n)||{},kn=function(t){t.insertAdjacentHTML("afterbegin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt("inbox-header-");return'\n\t<div class="gflow-grid__header">\n\t\t<i class="gflow-grid__search-icon gflow-icon gflow-icon--search"></i>\n\t\t'.concat(dt("search",t,"","","gform-input gflow-inbox__search","gflow-inbox-search","Search Inbox"),"\n\t</div>\n\t")}())},xn=function(t){var n,e=P(t);null===(n=bn[e])||void 0===n||n.grid_options,u.gridOptions[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"inbox_default";return(0,j.Z)({},D[t].grid_options,C)}(e),bn[e].push_enabled&&(c.pushEnabled=!0),u.gridOptions[e].overlayNoRowsTemplate='<span class="ag-overlay-no-rows-center">'.concat(_n.no_entries,"</span>"),et(e),u.gridOptions[e].getRowNodeId=function(t){return parseInt(t.id)},u.gridOptions[e].components={actionsRenderer:vt,agDateInput:X},u.gridOptions[e].getRowStyle=function(t){if(t.data.step_highlight)return{borderLeft:"3px solid ".concat(t.data.step_highlight)}},u.gridOptions[e].columnDefs.forEach((function(t,n){u.gridOptions[e].columnDefs[n]=ct(t)})),u.grids[e]=new G.rj(t,u.gridOptions[e]),kn(t),function(t,n){t.insertAdjacentHTML("afterbegin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-settings",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'\n\t<button \n\t\tclass="gflow-grid__button gflow-grid__button--settings gflow-icon gflow-icon--cog" \n\t\tdata-js="'.concat(t,'" \n\t\ttitle="').concat(n,'"\n\t></button>\n\t')}("inbox-settings",mn.toggle_settings_title)),t.insertAdjacentHTML("afterbegin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-fullscreen",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'\n\t<button \n\t\tclass="gflow-grid__button gflow-grid__button--fullscreen gflow-icon gflow-icon--fullscreen" \n\t\tdata-js="'.concat(t,'" \n\t\ttitle="').concat(n,'"\n\t></button>\n\t')}("inbox-fullscreeen",mn.toggle_fullscreen_title)),t.insertAdjacentHTML("afterbegin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid-clear-filters",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'\n\t<button \n\t\tclass="gflow-grid__button gflow-grid__button--clear-filters gflow-icon gflow-icon--trash" \n\t\tdata-js="'.concat(t,'" \n\t\ttitle="').concat(n,'"\n\t></button>\n\t')}("inbox-clear-filters",mn.toggle_clear_filters_title)),u.flyouts[n]=new pn({content:gt(hn[n]),position:"absolute",target:".gflow-inbox.gflow-grid",title:mn.inbox_settings,triggers:'[data-js="inbox-settings"]',wrapperClasses:"gform-flyout gform-flyout--inbox-settings"})}(t,e)},En=(null===I()||void 0===I()?void 0:I().grids)||{},On=Object.keys(En)[0]||"inbox_default",An=function(){var t=(0,jt.Z)(It().mark((function t(n){var e,o,i,a,r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=N(n),t.next=3,nn("inbox/changes",{method:"GET",params:{gflow_access_token:(null===(e=En[On])||void 0===e?void 0:e.current_user_token)||null,current_ids:a,search_args:JSON.stringify((null===(o=En[On])||void 0===o||null===(i=o.grid_options)||void 0===i?void 0:i.searchArgs)||null)}});case 3:r=t.sent,c.latestUpdateData=r.data,sn(n,r.data),r.data.addIndex=0,u.gridOptions[n].api.applyTransaction(r.data);case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),Ln=function(){a.containers.forEach((function(t){En[t.dataset.gridId].fetch_enabled&&(u.refreshTimers[t.dataset.gridId]=setInterval((function(){An(t.dataset.gridId).then((function(){dn(t.dataset.gridId)}))}),1e3*En[t.dataset.gridId].fetch_interval))}))},Tn=function(t){a.containers=t,a.containers.forEach((function(t){return xn(t)})),Ln(),V(),At(),yn(),T(),f(),R(),s(),fn(),c.pushEnabled&&void 0!==window.Notification&&"granted"!==window.Notification.permission&&window.Notification.requestPermission()}}}]);